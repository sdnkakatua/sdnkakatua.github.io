<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aesthetix | BG Remover</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #6366f1;
            --primary-light: #818cf8;
            --success: #10b981;
            --danger: #ef4444;
            --gray: #94a3b8;
            
            /* Light Mode Variables */
            --bg: #f1f5f9;
            --card-bg: rgba(255, 255, 255, 0.7);
            --input-bg: #ffffff;
            --border: #e2e8f0;
            --text-main: #0f172a;
            --text-sub: #64748b;
            --shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.05);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --bg: #020617;
                --card-bg: rgba(15, 23, 42, 0.7);
                --input-bg: #1e293b;
                --border: #334155;
                --text-main: #f8fafc;
                --text-sub: #94a3b8;
                --shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            }
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--bg);
            background-image: radial-gradient(circle at top right, rgba(99, 102, 241, 0.1), transparent),
                              radial-gradient(circle at bottom left, rgba(16, 185, 129, 0.05), transparent);
            color: var(--text-main);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 32px;
            padding: 40px;
            width: 100%;
            max-width: 480px;
            box-shadow: var(--shadow);
            text-align: center;
        }

        .logo {
            width: 50px;
            height: 50px;
            background: var(--primary);
            border-radius: 14px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            box-shadow: 0 10px 15px -3px rgba(99, 102, 241, 0.4);
        }

        h1 { font-weight: 800; font-size: 26px; margin-bottom: 8px; letter-spacing: -0.5px; }
        p { color: var(--text-sub); font-size: 14px; margin-bottom: 30px; line-height: 1.6; }

        /* API BOX */
        .api-section {
            text-align: left;
            margin-bottom: 25px;
        }

        label { 
            font-size: 11px; 
            font-weight: 700; 
            text-transform: uppercase; 
            letter-spacing: 1px; 
            color: var(--text-sub);
            margin-bottom: 8px;
            display: block;
        }

        .input-group {
            position: relative;
            display: flex;
            align-items: center;
        }

        input[type="password"], input[type="text"] {
            width: 100%;
            padding: 14px 45px 14px 16px;
            border-radius: 14px;
            border: 1px solid var(--border);
            background: var(--input-bg);
            color: var(--text-main);
            font-family: inherit;
            font-size: 14px;
            outline: none;
        }

        input:focus { border-color: var(--primary); ring: 2px var(--primary); }

        .toggle-btn {
            position: absolute;
            right: 12px;
            background: none;
            border: none;
            color: var(--text-sub);
            cursor: pointer;
            display: flex;
        }

        /* UPLOAD AREA */
        .upload-card {
            border: 2px dashed var(--border);
            border-radius: 20px;
            padding: 40px 20px;
            cursor: pointer;
            margin-bottom: 25px;
            background: rgba(255,255,255,0.02);
        }

        .upload-card:hover {
            border-color: var(--primary);
            background: rgba(99, 102, 241, 0.05);
            transform: scale(1.01);
        }

        .upload-card svg { color: var(--primary); margin-bottom: 12px; }
        .upload-text { font-weight: 600; font-size: 14px; display: block; }
        .upload-subtext { font-size: 12px; color: var(--text-sub); margin-top: 4px; }

        /* BUTTONS */
        .btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 16px;
            font-weight: 700;
            font-size: 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            color: white;
        }

        .btn-primary { background: var(--primary); box-shadow: 0 10px 20px -5px rgba(99, 102, 241, 0.4); }
        .btn-primary:hover { background: var(--primary-hover); transform: translateY(-2px); }
        .btn-primary:disabled { background: var(--gray); transform: none; box-shadow: none; cursor: not-allowed; }

        .btn-success { background: var(--success); margin-top: 15px; text-decoration: none; }

        /* RESULT AREA */
        .result-box {
            margin-top: 35px;
            display: none;
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .img-preview {
            width: 100%;
            border-radius: 18px;
            border: 1px solid var(--border);
            background-image: 
                linear-gradient(45deg, #808080 25%, transparent 25%), 
                linear-gradient(-45deg, #808080 25%, transparent 25%), 
                linear-gradient(45deg, transparent 75%, #808080 75%), 
                linear-gradient(-45deg, transparent 75%, #808080 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
            background-color: #eee; /* Light checkerboard */
        }

        /* LOADER */
        .spinner {
            display: none;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body>

<div class="container">
    <div class="logo">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6l3 12h12l3-12H3z"></path><path d="M9 22V12"></path><path d="M15 22V12"></path></svg>
    </div>
    
    <h1>Aesthetix Remover</h1>
    <p>Hapus latar belakang foto dalam hitungan detik dengan kualitas tinggi.</p>

    <div class="api-section">
        <label>remove.bg API Key</label>
        <div class="input-group">
            <input type="password" id="apiKey" placeholder="Paste your API Key here...">
            <button class="toggle-btn" id="toggleApi">
                <svg id="eyeIcon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
            </button>
        </div>
    </div>

    <div class="upload-card" id="dropZone" onclick="document.getElementById('fileInput').click()">
        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>
        <span class="upload-text" id="fileNameDisplay">Pilih Foto (PNG/JPG)</span>
        <span class="upload-subtext">Maksimal ukuran file 5MB</span>
        <input type="file" id="fileInput" hidden accept="image/*">
    </div>

    <button class="btn btn-primary" id="processBtn">
        <div class="spinner" id="loader"></div>
        <span id="btnText">Mulai Hapus Latar</span>
    </button>

    <div class="result-box" id="resultContainer">
        <label>Pratinjau Hasil</label>
        <img src="" id="outputImg" class="img-preview">
        <a id="downloadBtn" class="btn btn-success">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
            Unduh Hasil PNG
        </a>
    </div>
</div>

<script>
    const apiKeyInput = document.getElementById('apiKey');
    const toggleApi = document.getElementById('toggleApi');
    const fileInput = document.getElementById('fileInput');
    const processBtn = document.getElementById('processBtn');
    const resultContainer = document.getElementById('resultContainer');
    const outputImg = document.getElementById('outputImg');
    const downloadBtn = document.getElementById('downloadBtn');
    const loader = document.getElementById('loader');
    const btnText = document.getElementById('btnText');
    const fileNameDisplay = document.getElementById('fileNameDisplay');

    // --- AUTO LOAD & SAVE API KEY ---
    window.addEventListener('load', () => {
        const savedKey = localStorage.getItem('aes_remover_key');
        if (savedKey) apiKeyInput.value = savedKey;
    });

    apiKeyInput.addEventListener('input', () => {
        localStorage.setItem('aes_remover_key', apiKeyInput.value.trim());
    });

    // --- TOGGLE SHOW/HIDE API ---
    toggleApi.addEventListener('click', () => {
        const isPass = apiKeyInput.type === 'password';
        apiKeyInput.type = isPass ? 'text' : 'password';
        toggleApi.style.color = isPass ? 'var(--primary)' : 'var(--text-sub)';
    });

    // --- FILE SELECTION UI ---
    fileInput.addEventListener('change', () => {
        if(fileInput.files[0]) {
            fileNameDisplay.innerText = fileInput.files[0].name;
            fileNameDisplay.style.color = 'var(--success)';
        }
    });

    // --- MAIN PROCESS ---
    processBtn.addEventListener('click', async () => {
        const file = fileInput.files[0];
        const key = apiKeyInput.value.trim();

        if (!key) return alert('Ups! Masukkan API Key dulu.');
        if (!file) return alert('Pilih foto yang ingin diedit.');

        // Loading State
        processBtn.disabled = true;
        loader.style.display = 'block';
        btnText.innerText = 'Memproses...';

        const formData = new FormData();
        formData.append('image_file', file);
        formData.append('size', 'auto');

        try {
            const response = await fetch('https://api.remove.bg/v1.0/removebg', {
                method: 'POST',
                headers: { 'X-Api-Key': key },
                body: formData
            });

            if (response.ok) {
                const blob = await response.blob();
                const url = URL.createObjectURL(blob);
                
                outputImg.src = url;
                downloadBtn.href = url;
                downloadBtn.download = `aesthetix_${file.name.split('.')[0]}.png`;
                
                resultContainer.style.display = 'block';
                resultContainer.scrollIntoView({ behavior: 'smooth' });
            } else {
                const errorData = await response.json();
                alert('Error: ' + errorData.errors[0].title);
            }
        } catch (e) {
            alert('Gagal terhubung ke server.');
        } finally {
            processBtn.disabled = false;
            loader.style.display = 'none';
            btnText.innerText = 'Mulai Hapus Latar';
        }
    });
</script>

</body>
</html>
